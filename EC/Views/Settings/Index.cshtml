@using EC.Models;
@using EC.Models.Database;
@using EC.App_LocalResources;
@{
    ViewBag.Title = GlobalRes.MySettings;
    Layout = "~/Views/Shared/IndexPages/LayoutCasesNewReport.cshtml";


    UserModel um = (UserModel)ViewBag.um;
    var user_id = um.ID;
    int checkBoxActiveCases = um._user.notification_messages_actions_flag;
    int checkBoxNewReports = um._user.notification_new_reports_flag;
    string mediator_active = string.Empty;
    string adminMediator_active = string.Empty;
    string escalationMediator_active = string.Empty;
    var a=10;
    if(um._user.role_id != null ) {

        switch(um._user.role_id) {
            case(6):
                mediator_active = "active";
                break;
            case(5):
                adminMediator_active = "active";
                break;
            case(4):
                escalationMediator_active = "active";
                break;
        }
    }
    if (um._user.photo_path == null || um._user.photo_path == String.Empty) {
        um._user.photo_path = "/Content/Icons/settingsPersonalNOPhoto.png";
    }
    bool is_cc = ViewBag.is_cc;
    String class_ext = ViewBag.cc_extension;
}

<div class="blockSettings">
    <!--casesHeared-->
    @{ 
        int active = 1;
    }
    @Html.Partial("~/Views/Settings/partial/casesHeared.cshtml", active)
    <!--casesHeared-->

    
@using (Html.BeginForm("UpdateUser", "Settings", Model, FormMethod.Post)) { 
        @Html.AntiForgeryToken()
        @model user
        @Html.HiddenFor(model => Model.id)
        <div class="contentSettings">
            <div class="blockPersonalPhotoSetting">
                <div class="blockPhotoSetting">
                    <img id="logoUser" class="PersonalPhotoBlock" src="@um._user.photo_path" />
                    <input type="file" accept="image/*" id="_file" name="_file" multiple="multiple" style="width: 1px;height: 1px;opacity: 0;" />                    
                </div>
                <div class="blockHoverPhoto">
                    <label class="close"></label>
                    <label class="newImageBtn">@GlobalRes.Newimage</label>
                </div>
            </div>


            <div class="personalBlock">
                <div class="blockPersonalSettings greyBorder">
                    <p class="title">@GlobalRes.Firstname</p>
                    @Html.EditorFor(model => model.first_nm, new { first_nm = "first_nm" })
                </div>
                <div class="blockPersonalSettings greyBorder">
                    <p class="title">@GlobalRes.Lastname</p>
                    @Html.EditorFor(model => model.last_nm, new { last_nm = "last_nm" })
                </div>
                <div class="blockPersonalSettings greyBorder">
                    <p class="title">@GlobalRes.Title</p>
                    @Html.EditorFor(model => model.title_ds, new { title_ds = "title_ds" })
                </div>
                <div class="blockPersonalSettings greyBorder">
                    <p class="title">@GlobalRes.Department</p>
                    @Html.DropDownListFor(model => Model.company_department_id, new SelectList(um.listDepartments, "id", "department_nm"))
                </div>
                <div class="blockPersonalSettings greyBorder">
                    <div id="personeAgain">
                        <div class="title">@GlobalRes.UserPermissions</div>
                        <div class="help" title="">
                            ?
                            <div class="hoverElement">
                                <div class="triangleHover position"></div>
                                <div class="spec position">
                                    <table>
                                        <tr>
                                            <td>User Permissions:</td>
                                            <td>Change Settings</td>
                                            <td>Sign-Off Case</td>
                                            <td>All Cases Access</td>
                                            <td>Case Specific Access</td>
                                        </tr>
                                        <tr>
                                            <td>Platform Manager</td>
                                            <td><div class="radio"></div></td>
                                            <td><div class="radio"></div></td>
                                            <td><div class="radio"></div></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>Case Investigator</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td><div class="radio"></div> </td>
                                        </tr>
                                        <tr>
                                            <td>Case Reviewer</td>
                                            <td></td>
                                            <td><div class="radio"></div></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </table>
                                    @*<ul>
                                        <li>A <strong>Case Administrator</strong> is assigned to a specific case.</li>
                                        <li>A <strong>Case Manager</strong> is responsible for and manages the Employee Confidential system and assigns all the cases (typically an HR manager).</li>
                                        <li>A <strong>Case Executive</strong> handles only escalation issues and signs off on case resolutions and closure applications.</li>
                                    </ul>*@
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="rowBlock inputMediator">
                        <div class="freeBlock inputRadio mediator @mediator_active">
                            <label class="inputBlock" for="freeIncident">
                                <input id="oneIncident" type="radio" name="role_id" value="6">
                                <span class="radioTitle">@GlobalRes.Mediator</span>
                            </label>
                        </div>
                        <div class="freeBlock inputRadio adminMediator adminMediator@{@class_ext} @adminMediator_active">
                            <label class="inputBlock" for="freeIncident">
                                <input id="twoIncident" type="radio" name="role_id" value="5">
                                <span class="radioTitle">@GlobalRes.AdminMediator</span>
                            </label>
                        </div>
                        <div class="freeBlock inputRadio escalationMediator @escalationMediator_active">
                            @*<label class="inputBlock" for="fourIncident">*@
                            <label class="inputBlock" for="freeIncident">
                                <input id="threeIncident" type="radio" name="role_id" value="4" >
                                <span class="radioTitle">@GlobalRes.EscalationMediator</span>
                            </label>
                        </div>
                    </div><!--rowBlock-->
                </div>
                <div class="blockPersonalSettings greyBorder">
                    <p class="title">@GlobalRes.Email</p>
                    @Html.TextBoxFor(model => model.email, new { email = "email"})
                </div>
                <div class="blockPersonalSettings greyBorder">
                    <p class="title">@GlobalRes.often_notifications_active</p>
                    <div class="rowBlock" id="checkBoxActiveCases">
                        <div class="freeBlock inputRadio" data-valueflag="0">
                            <label class="inputBlock" for="firstIncident">
                                @Html.RadioButtonFor(model => model.notification_new_reports_flag, "1")
                                <span class="radioButton"></span>
                                <span class="radioTitle">@GlobalRes.Instantly</span>
                            </label>
                        </div>
                        <div class="freeBlock inputRadio" data-valueflag="1">
                            <label class="inputBlock" for="secondIncident">
                                @Html.RadioButtonFor(model => model.notification_new_reports_flag, "2")
                                <span class="radioButton"></span>
                                <span class="radioTitle">@GlobalRes.Onceaday</span>
                            </label>
                        </div>
                    </div><!--rowBlock-->
                </div>

                <div class="blockPersonalSettings greyBorder">
                    <p class="title">@GlobalRes.often_notifications_new</p>
                    <div class="rowBlock" id="checkBoxNewReports">
                        <div class="freeBlock inputRadio" data-valueFlag="0">
                            <label class="inputBlock" for="thirdIncident">
                                @Html.RadioButtonFor(model => model.notification_messages_actions_flag, "1")
                                <span class="radioButton"></span>
                                <span class="radioTitle">@GlobalRes.Instantly</span>
                            </label>
                        </div>
                        <div class="freeBlock inputRadio" data-valueFlag="1">
                            <label class="inputBlock" for="fourIncident">
                                @Html.RadioButtonFor(m => m.notification_messages_actions_flag, "2")
                                <span class="radioButton"></span>
                                <span class="radioTitle">@GlobalRes.Onceaday</span>
                            </label>
                        </div>
                    </div><!--rowBlock-->
                </div>
                <div class="blockUpdateProfile">
                    <div class="updateProfileBtn">
                        <input class="greenButton" type="submit" value="update"  />
                        <span style="display: none;">@GlobalRes.UpdateProfile.ToLower()</span>
                    </div>
                </div>

            </div>
        </div>
        }
    <!--</form>-->
</div>

<input type="hidden" id="urlAjaxUploadFiles" from="User" value="@Url.Action("AddLogoCompany", "Settings")" />
<input type="hidden" id="levelId" value="@Html.Raw(um._user.role_id)" />