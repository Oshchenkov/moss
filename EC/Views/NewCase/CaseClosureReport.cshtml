@using EC.Models.Database;
@{
    var report_id = (Int32)ViewBag.report_id;
    var user_id = (Int32)ViewBag.user_id;
    List<attachment> attachmentFiles = (List<attachment>)ViewBag.attachmentFiles;
    Layout = "~/Views/Shared/IndexPages/LayoutCasesNewReport.cshtml";
    string popup = null;
    bool? is_cc = ViewBag.is_cc;
    is_cc = true;
}
<link type="text/css" href="~/Content/caseTasks.css" rel="stylesheet">

<style>
#investigationNotes {
    width: 100%;
    background-color: #f2f7f7;
    height: 100%;
}
#bigPadding {
    padding: 0 48px;
}
#investigationNotes #firstBlock select{
    outline: none;
    border: none;
    padding-left: 17px;
    width: 220px;
    height: 40px;
    margin-left: 12px;
}
#investigationNotes #firstBlock {
    border-bottom: 1px solid #bfc3c2;
}
#investigationNotes #firstBlock table {
            width: 100%;
    padding-left: 64px;
    padding-bottom: 28px;
}
#secondBlock .positionArea {
        padding-left: 64px;
    padding-bottom: 85px;
}
#investigationNotes .button {
        border: 1px solid #6ccec3;
    color: #05b5a2;
    padding-left: 10px;
    padding-right: 10px;
    margin-left: 15px;
    font-size: 10pt;
    padding: 5px 13px 5px 13px;
    width: 65px;
}
#secondBlock {
    border-bottom: 1px solid #bfc3c2;
}
</style>
<div id="investigationNotes" ng-controller="NewCaseCaseClosureReportController">
    <div id="bigPadding">
        <div id="firstBlock">
            @if (is_cc == true)
            {
                <p>Is this a Clery Act Crime?</p>
                <table>
                    <tr>
                        <td width="100px">
                            <label class="inputBlock" for="No">
                                <input id="No" type="radio" name="radioName" value="false" ng-model="model.report_cc_crime.cc_is_clear_act_crime" ng-change="saveCrime()">
                                <span class="radioButton"></span>
                                <span class="radioTitle">No</span>
                            </label>
                        </td>
                        <td width="100px">
                            <label class="inputBlock" for="Yes">
                                <input id="Yes" type="radio" name="radioName" value="true" ng-model="model.report_cc_crime.cc_is_clear_act_crime" ng-change="saveCrime()">
                                <span class="radioButton"></span>
                                <span class="radioTitle">Yes</span>
                            </label>
                        </td>
                        <td>
                            <select 
                                    ng-change="saveCrime()"
                                    ng-show="model.report_cc_crime.cc_is_clear_act_crime == 'true'"
                                    ng-model="model.report_cc_crime.cc_crime_statistics_category_id"
                                    ng-options="item.id as item.crime_statistics_category_en for item in model.cc_crime_statistics_categories"></select>
                        </td>
                        <td>
                            <select                        
                                    ng-change="saveCrime()"
                                    ng-show="model.report_cc_crime.cc_is_clear_act_crime == 'true'"
                                    ng-model="model.report_cc_crime.cc_crime_statistics_location_id" 
                                    ng-options="item.id as item.crime_statistics_location_en for item in model.cc_crime_statistics_locations"></select>
                        </td>
                    </tr>
                </table>
            }
        </div>
        <div id="secondBlock">
            <p>
                Executive Summary
            </p>
            <textarea class="positionArea" ng-model="model.report_cc_crime.executive_summary">

            </textarea>
            <div class="button" ng-click="saveCrime()">
                Add
            </div>
        </div>
        <div id="thirdBlock">
            <p>
                Recommended Outcomes for Subject(s)
            </p>
            <table>
                <tr ng-repeat="user in model.report_case_closure_outcomes">
                    <td>{{user.user.Name}} {{user.user.Title}}</td>
                    <td>
                        <select ng-change="saveItem(user)"
                                ng-model="user.outcome_id"
                                ng-options="item.id as item.outcome_en for item in model.outcomes"></select>
                    </td>
                    <td>
                        <div ng-show="user.isEditNote">
                            <textarea class="positionArea" ng-model="user.note"></textarea>
                            <div class="button" ng-click="saveItem(user)">
                                Save
                            </div>
                        </div>
                        <div class="button" ng-click="user.isEditNote = !user.isEditNote" ng-show="!user.isEditNote">
                            Add note
                        </div>
                    </td>
                </tr>                
            </table>
        </div>
        <div id="fourthBlock">
            <p>
                Recommended Recommended Actions for Witnesses and Reporter
            </p>
            <select ng-change="saveItem(model.reporter)"
                    ng-model="model.reporter.outcome_id"
                    ng-options="item.id as item.outcome_en for item in model.outcomes"></select>
            <div ng-show="model.reporter.isEditNote">
                <textarea class="positionArea" ng-model="model.reporter.note"></textarea>
                <div class="button" ng-click="saveItem(model.reporter)">
                    Save
                </div>
            </div>
            <div class="button" ng-click="model.reporter.isEditNote = !model.reporter.isEditNote" ng-show="!model.reporter.isEditNote">
                Add note
            </div>
        </div>
    </div>
</div>