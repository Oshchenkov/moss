@using EC.App_LocalResources;
@using EC.Models.ViewModel;

@{
    bool? is_cc = ViewBag.is_cc;
    if (!is_cc.HasValue)
    {
        is_cc = false;
    }
    String class_ext = ViewBag.cc_extension;

    Layout = "~/Views/Shared/IndexPages/LayoutCasesNewReport.cshtml";
    ViewBag.Title = GlobalRes.ActiveCasesUp;
    //Layout = "~/Views/Shared/LayoutMediators.cshtml";

    Int32 report_ids_Completed = ViewBag.completed_report_counters;
    Int32 report_ids_Spam = ViewBag.spam_report_counters;
    Int32 report_ids_Active = ViewBag.active_report_counters;
    Int32 report_ids_Closed = ViewBag.closed_report_counters;

    //List<CasePreviewViewModel> preview_start_list = ViewBag.ReportPreviewStart;
    //List<int> preview_list = ViewBag.ReportPreviewVM;

    <script src="~/Scripts/View/menuWork.js"></script>
    <script src="~/Scripts/View/CaseCircleDraw.js"></script>

    var user_id = (Int32)ViewBag.user_id;
    IEnumerable<int> pending_report_ids = ViewBag.pending_report_ids;
    if (pending_report_ids != null)
    {
        foreach (int _report_id in pending_report_ids)
        {
            @Html.Partial("~/Views/PartialViews/_ReportPendingNotification.cshtml", new ViewDataDictionary { { "report_id", _report_id }, { "user_id", user_id } })
        }
    }
}

<div ng-controller="CasesController">
    <div id="casesHeared" class="pageCases">
        <div id="menu">
            <h2 class="mainTitle">@GlobalRes.Menu:</h2>
            <div>
                <a href="#" class="caseesTab" ng-class="{'active': mode == 1}" ng-click="Refresh(1)">
                    @GlobalRes.Activecases
                    <span>{{counts.Active}}</span>
                </a>
                <a href="#" class="caseesTab" ng-class="{'active': mode == 2}" ng-click="Refresh(2)">
                    @GlobalRes.Completedcases
                    <span>{{counts.Completed}}</span>
                </a>
                <a href="#" class="caseesTab" ng-class="{'active': mode == 5}" ng-click="Refresh(5)">
                    @GlobalRes.ClosedCases
                    <span>{{counts.Closed}}</span>
                </a>
                <a href="#" class="caseesTab" ng-class="{'active': mode == 3}" ng-click="Refresh(3)">
                    @GlobalRes.Spam
                    <span>{{counts.Spam}}</span>
                </a>
            </div>
        </div>
        <div id="positionIconCases">
            <div class="squareIcon firstPositionSquareIcon"></div>
            <div class="squareIcon secondPositionSquareIcon"></div>
            <div class="squareIcon thirdPositionSquareIcon"></div>
            <div class="squareIcon fourthPositionSquareIcon"></div>
        </div>
    </div>

    <div id="casesIndex">
        <div class="positionTableCases">
            <table class="tableCasesIndex">
                <thead>
                    <tr>
                        <td>case</td>
                        <td>stage</td>
                        <td>age</td>
                        <td>Incident Type</td>
                        <td>Location</td>
                        <td>Report date</td>
                        <td>messages</td>
                        <td>task</td>
                        <td>team</td>
                        <td></td>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="report in reports">
                        <td class="firstColumn">{{report.case_number}}</td>
                        <td>{{report.current_status}}<span> {{report.days_left}} days left</span></td>
                        <td>{{days_left}}</td>
                        <td>{{report.case_secondary_types}}</td>
                        <td>{{report.location}}</td>
                        <td>{{report.case_dt}}</td>
                        <td>{{report.new_messages}}</td>
                        <td>{{report.new_tasks}}</td>
                        <td>{{report.team_number}}</td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>